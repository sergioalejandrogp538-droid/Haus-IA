<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Haus.AI - Funcionalidad Pura</title>
  <style>
    /* Bauhaus Typography - Geometric Sans */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background: white;
      color: #000;
      line-height: 1.5;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    
    /* Bauhaus Color Palette */
    :root {
      --bauhaus-red: #d90000;
      --bauhaus-blue: #0057b8;
      --bauhaus-yellow: #ffd700;
      --bauhaus-black: #000000;
      --bauhaus-white: #ffffff;
      --bauhaus-gray: #f0f0f0;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 30px 0;
      border-bottom: 3px solid var(--bauhaus-black);
    }
    
    .logo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .hausai-logo {
      width: 80px;
      height: 80px;
      position: relative;
    }
    
    h1 {
      font-size: 2.8rem;
      font-weight: 700;
      letter-spacing: -1px;
      text-transform: uppercase;
      color: var(--bauhaus-black);
    }
    
    .subtitle {
      font-size: 1.1rem;
      font-weight: 300;
      color: var(--bauhaus-black);
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }
    
    .main-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
    }
    
    .chat-container {
      background: var(--bauhaus-white);
      border: 3px solid var(--bauhaus-black);
      padding: 30px;
      min-height: 400px;
      display: flex;
      flex-direction: column;
    }
    
    .messages {
      flex: 1;
      overflow-y: auto;
      padding-bottom: 20px;
      margin-bottom: 20px;
    }
    
    .message {
      margin-bottom: 20px;
      padding: 15px;
      max-width: 80%;
      border: 2px solid var(--bauhaus-black);
      font-weight: 300;
      position: relative;
      display: flex;
      gap: 15px;
    }
    
    .message.bauai {
      background: var(--bauhaus-white);
      margin-right: auto;
      align-items: flex-start;
    }
    
    .message.user {
      background: var(--bauhaus-black);
      color: var(--bauhaus-white);
      margin-left: auto;
      text-align: right;
      flex-direction: row-reverse;
      align-items: flex-start;
    }
    
    .avatar-container {
      width: 50px;
      height: 50px;
      position: relative;
    }
    
    .message-content {
      flex: 1;
    }
    
    .input-area {
      display: flex;
      gap: 15px;
    }
    
    input {
      flex: 1;
      padding: 15px;
      border: 3px solid var(--bauhaus-black);
      font-family: 'Montserrat', sans-serif;
      font-size: 16px;
      font-weight: 400;
    }
    
    input:focus {
      outline: none;
      border-color: var(--bauhaus-red);
    }
    
    button {
      background: var(--bauhaus-black);
      color: var(--bauhaus-white);
      border: 3px solid var(--bauhaus-black);
      padding: 0 25px;
      font-family: 'Montserrat', sans-serif;
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      cursor: pointer;
      letter-spacing: 1px;
    }
    
    button:hover {
      background: var(--bauhaus-white);
      color: var(--bauhaus-black);
    }
    
    /* Diagrama SVG */
    .diagram-container {
      text-align: center;
      margin: 25px 0;
      padding: 20px;
      border: 2px solid var(--bauhaus-black);
      background: var(--bauhaus-white);
    }
    
    .diagram-title {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    
    .bauhaus-diagram {
      max-width: 300px;
      height: auto;
      margin: 0 auto;
    }
    
    /* Bauhaus Construction Steps */
    .construction-result {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid var(--bauhaus-black);
    }
    
    .steps-container {
      margin-top: 20px;
    }
    
    .step {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--bauhaus-gray);
    }
    
    .step:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .step-number {
      min-width: 28px;
      height: 28px;
      background: var(--bauhaus-black);
      color: var(--bauhaus-white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
    }
    
    .step-content h4 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .step-content p {
      font-weight: 300;
      font-size: 0.95rem;
    }
    
    .materials-list {
      padding-left: 25px;
      margin: 15px 0;
    }
    
    .materials-list li {
      margin-bottom: 8px;
      font-weight: 300;
      position: relative;
    }
    
    .materials-list li:before {
      content: "—";
      position: absolute;
      left: -20px;
      color: var(--bauhaus-black);
    }
    
    .note {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid var(--bauhaus-black);
      font-style: italic;
      font-weight: 300;
      font-size: 0.9rem;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid var(--bauhaus-black);
      font-weight: 300;
      color: var(--bauhaus-black);
    }
    
    /* Bauhaus Grid Pattern */
    .grid-pattern {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(var(--bauhaus-black) 1px, transparent 1px),
        linear-gradient(90deg, var(--bauhaus-black) 1px, transparent 1px);
      background-size: 40px 40px;
      opacity: 0.03;
      pointer-events: none;
      z-index: -1;
    }
  </style>
</head>
<body>
  <div class="grid-pattern"></div>
  <div class="container">
    <header>
      <div class="logo-container">
        <!-- Logo exacto como en la imagen -->
        <svg class="hausai-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <!-- Fondo negro -->
          <circle cx="50" cy="50" r="50" fill="black"/>
          
          <!-- Círculo blanco exterior -->
          <circle cx="50" cy="50" r="48" fill="white" stroke="black" stroke-width="2"/>
          
          <!-- Parte inferior negra -->
          <rect x="2" y="60" width="96" height="38" fill="black"/>
          
          <!-- Elementos geométricos -->
          <!-- Líneas diagonales izquierda -->
          <line x1="10" y1="20" x2="25" y2="35" stroke="black" stroke-width="2"/>
          <line x1="12" y1="22" x2="27" y2="37" stroke="black" stroke-width="2"/>
          <line x1="14" y1="24" x2="29" y2="39" stroke="black" stroke-width="2"/>
          
          <!-- Línea vertical central -->
          <line x1="50" y1="10" x2="50" y2="60" stroke="black" stroke-width="2"/>
          
          <!-- Círculo negro en la parte superior derecha -->
          <circle cx="70" cy="20" r="5" fill="black"/>
          
          <!-- Círculo negro en la parte media izquierda -->
          <circle cx="30" cy="35" r="5" fill="black"/>
          
          <!-- Semicírculo azul en la parte inferior izquierda -->
          <path d="M20,60 A30,30 0 0,1 50,60 L50,90 L20,90 Z" fill="#0057b8"/>
          
          <!-- Semicírculo rojo en el centro -->
          <path d="M50,60 A30,30 0 0,1 80,60 L80,90 L50,90 Z" fill="#d90000"/>
          
          <!-- Semicírculo amarillo en la parte derecha -->
          <path d="M80,10 A30,30 0 0,1 80,60 L80,90 L100,90 L100,10 Z" fill="#ffd700"/>
          
          <!-- Círculo rojo dentro del azul -->
          <circle cx="35" cy="75" r="10" fill="#d90000"/>
          
          <!-- Líneas horizontales en el semicírculo rojo -->
          <line x1="55" y1="40" x2="75" y2="40" stroke="black" stroke-width="2"/>
          <line x1="55" y1="45" x2="75" y2="45" stroke="black" stroke-width="2"/>
          <line x1="55" y1="50" x2="75" y2="50" stroke="black" stroke-width="2"/>
          
          <!-- Líneas horizontales en el semicírculo amarillo -->
          <line x1="85" y1="25" x2="95" y2="25" stroke="black" stroke-width="2"/>
          <line x1="85" y1="30" x2="95" y2="30" stroke="black" stroke-width="2"/>
          <line x1="85" y1="35" x2="95" y2="35" stroke="black" stroke-width="2"/>
          
          <!-- Arco en la parte inferior derecha -->
          <path d="M80,80 Q90,75 100,80" fill="none" stroke="black" stroke-width="2"/>
        </svg>
      </div>
      <h1>Haus.AI</h1>
      <p class="subtitle">Inteligencia artificial funcional. Solo lo esencial para que funcione.</p>
    </header>

    <div class="main-content">
      <div class="chat-container">
        <div class="messages" id="messages">
          <!-- Los mensajes se generarán aquí -->
        </div>
        
        <div class="input-area">
          <input 
            type="text" 
            id="userInput" 
            placeholder="Ej: mesa, carro, silla, casa, robot, etc..."
            autocomplete="off"
          >
          <button id="sendBtn" onclick="sendMessage()">Enviar</button>
        </div>
      </div>
    </div>

    <footer>
      <p>HAUS.AI • Form follows function • Sin límites</p>
    </footer>
  </div>

  <script>
    // Base de conocimiento dinámico - genera respuestas para cualquier producto
    const knowledgeBase = {
      // Productos predefinidos para ejemplos
      "mesa": {
        materials: [
          "Superficie plana rígida (madera contrachapada)",
          "Cuatro patas de sección cuadrada (madera o metal)",
          "Conectores estructurales (tornillos de acero)"
        ],
        steps: [
          {
            title: "Cortar superficie",
            description: "Cortar una lámina rígida al tamaño funcional requerido. La superficie debe ser plana y resistente."
          },
          {
            title: "Preparar patas",
            description: "Cortar cuatro elementos verticales de igual longitud para garantizar estabilidad en superficies planas."
          },
          {
            title: "Ensamblar estructura",
            description: "Fijar las patas a la superficie utilizando conectores que aseguren la integridad estructural bajo carga."
          }
        ],
        note: "Sin acabados, sin bordes redondeados, sin pintura. Solo geometría funcional.",
        diagram: `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
          <!-- Superficie de la mesa -->
          <rect x="20" y="40" width="160" height="12" fill="none" stroke="black" stroke-width="2"/>
          <!-- Patas -->
          <rect x="30" y="52" width="8" height="100" fill="none" stroke="black" stroke-width="2"/>
          <rect x="60" y="52" width="8" height="100" fill="none" stroke="black" stroke-width="2"/>
          <rect x="132" y="52" width="8" height="100" fill="none" stroke="black" stroke-width="2"/>
          <rect x="162" y="52" width="8" height="100" fill="none" stroke="black" stroke-width="2"/>
        </svg>`
      },
      "carro": {
        materials: [
          "Chasis rectangular (perfil metálico soldado)",
          "Cuatro ruedas con neumáticos básicos",
          "Eje de dirección (barra metálica con pivote)",
          "Motor eléctrico mínimo (250W)",
          "Sistema de freno mecánico",
          "Asiento plano (lámina metálica)"
        ],
        steps: [
          {
            title: "Construir chasis",
            description: "Soldar perfiles metálicos en forma rectangular para crear la estructura portante básica."
          },
          {
            title: "Instalar sistema de ruedas",
            description: "Montar ejes y ruedas asegurando alineación geométrica para movimiento rectilíneo."
          },
          {
            title: "Implementar dirección",
            description: "Conectar eje delantero a sistema de dirección que permita control angular preciso."
          },
          {
            title: "Integrar propulsión",
            description: "Instalar motor eléctrico conectado al eje trasero para generar movimiento controlado."
          },
          {
            title: "Añadir seguridad",
            description: "Incorporar sistema de freno mecánico que permita detención controlada del vehículo."
          },
          {
            title: "Colocar asiento",
            description: "Fijar superficie plana que permita al operador mantener posición estable durante el uso."
          }
        ],
        note: "Sin carrocería, sin comodidades, sin elementos decorativos. Solo transporte funcional.",
        diagram: `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
          <!-- Chasis -->
          <rect x="30" y="80" width="140" height="20" fill="none" stroke="black" stroke-width="2"/>
          <!-- Ruedas -->
          <circle cx="60" cy="140" r="20" fill="none" stroke="black" stroke-width="2"/>
          <circle cx="140" cy="140" r="20" fill="none" stroke="black" stroke-width="2"/>
          <circle cx="60" cy="60" r="15" fill="none" stroke="black" stroke-width="2"/>
          <circle cx="140" cy="60" r="15" fill="none" stroke="black" stroke-width="2"/>
          <!-- Asiento -->
          <rect x="90" y="50" width="20" height="8" fill="none" stroke="black" stroke-width="2"/>
        </svg>`
      },
      "silla": {
        materials: [
          "Asiento plano (lámina de madera contrachapada)",
          "Respaldar vertical (lámina rectangular)",
          "Tres patas trianguladas (madera maciza)",
          "Conectores metálicos"
        ],
        steps: [
          {
            title: "Crear asiento",
            description: "Cortar lámina rectangular que proporcione superficie de apoyo mínima para el cuerpo humano sentado."
          },
          {
            title: "Construir respaldo",
            description: "Cortar lámina vertical que ofrezca soporte básico a la espalda en posición sentada."
          },
          {
            title: "Diseñar base",
            description: "Configurar tres puntos de apoyo en disposición triangular para garantizar estabilidad máxima."
          },
          {
            title: "Ensamblar",
            description: "Unir todos los elementos con conectores que aseguren la integridad estructural durante el uso."
          }
        ],
        note: "Sin curvas ergonómicas, sin tapizado, sin brazos. Solo apoyo funcional.",
        diagram: `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
          <!-- Asiento -->
          <rect x="60" y="100" width="80" height="10" fill="none" stroke="black" stroke-width="2"/>
          <!-- Respaldar -->
          <rect x="95" y="40" width="10" height="60" fill="none" stroke="black" stroke-width="2"/>
          <!-- Patas -->
          <line x1="70" y1="110" x2="50" y2="180" stroke="black" stroke-width="2"/>
          <line x1="130" y1="110" x2="150" y2="180" stroke="black" stroke-width="2"/>
          <line x1="100" y1="110" x2="100" y2="180" stroke="black" stroke-width="2"/>
        </svg>`
      },
      "bicicleta": {
        materials: [
          "Cuadro triangular (tubos metálicos soldados)",
          "Dos ruedas con neumáticos",
          "Sistema de transmisión (pedales, cadena, piñón)",
          "Manillar recto (barra metálica)",
          "Frenos de zapata",
          "Sillín plano"
        ],
        steps: [
          {
            title: "Fabricar cuadro",
            description: "Soldar tubos metálicos en configuración triangular que proporcione rigidez estructural óptima."
          },
          {
            title: "Montar ruedas",
            description: "Instalar ruedas delantera y trasera asegurando alineación paralela para movimiento rectilíneo."
          },
          {
            title: "Instalar transmisión",
            description: "Conectar pedales al piñón trasero mediante cadena para transferir fuerza humana a movimiento."
          },
          {
            title: "Añadir control",
            description: "Fijar manillar recto al eje delantero para permitir dirección precisa del vehículo."
          },
          {
            title: "Incorporar frenos",
            description: "Instalar sistema de frenado que permita controlar la velocidad y detener el vehículo."
          },
          {
            title: "Colocar sillín",
            description: "Fijar superficie plana que permita al ciclista mantener posición estable durante el pedaleo."
          }
        ],
        note: "Sin suspensiones, sin cambios, sin accesorios. Solo propulsión humana funcional.",
        diagram: `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
          <!-- Ruedas -->
          <circle cx="60" cy="130" r="30" fill="none" stroke="black" stroke-width="2"/>
          <circle cx="140" cy="130" r="30" fill="none" stroke="black" stroke-width="2"/>
          <!-- Cuadro triangular -->
          <line x1="60" y1="100" x2="140" y2="100" stroke="black" stroke-width="2"/>
          <line x1="140" y1="100" x2="100" y2="60" stroke="black" stroke-width="2"/>
          <line x1="100" y1="60" x2="60" y2="100" stroke="black" stroke-width="2"/>
          <!-- Manillar -->
          <line x1="60" y1="100" x2="40" y2="80" stroke="black" stroke-width="2"/>
          <!-- Sillín -->
          <line x1="115" y1="85" x2="125" y2="85" stroke="black" stroke-width="2"/>
        </svg>`
      },
      "lámpara": {
        materials: [
          "Fuente de luz LED funcional",
          "Soporte estructural mínimo",
          "Cables eléctricos básicos",
          "Interruptor simple",
          "Base estable"
        ],
        steps: [
          {
            title: "Seleccionar fuente de luz",
            description: "Elegir una bombilla LED que proporcione iluminación adecuada para la función requerida."
          },
          {
            title: "Crear soporte",
            description: "Construir una estructura mínima que posicione la fuente de luz en el lugar funcional deseado."
          },
          {
            title: "Conectar circuito",
            description: "Instalar cables e interruptor para permitir el control de encendido y apagado de la luz."
          },
          {
            title: "Asegurar base",
            description: "Fijar una base estable que evite caídas o volcamientos durante el uso."
          }
        ],
        note: "Sin pantalla decorativa, sin diseños artísticos, sin controles de intensidad. Solo iluminación funcional.",
        diagram: `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
          <!-- Base -->
          <rect x="80" y="160" width="40" height="10" fill="none" stroke="black" stroke-width="2"/>
          <!-- Soporte -->
          <line x1="100" y1="60" x2="100" y2="160" stroke="black" stroke-width="2"/>
          <!-- Fuente de luz -->
          <circle cx="100" cy="50" r="12" fill="none" stroke="black" stroke-width="2"/>
          <!-- Filamento -->
          <line x1="95" y1="45" x2="105" y2="55" stroke="black" stroke-width="1"/>
          <line x1="95" y1="55" x2="105" y2="45" stroke="black" stroke-width="1"/>
        </svg>`
      }
    };

    const messagesDiv = document.getElementById('messages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    // Mensaje de bienvenida
    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : 'bauai'}`;
      
      if (!isUser) {
        // Añadir avatar de HausAI (exactamente como en la imagen)
        const avatarContainer = document.createElement('div');
        avatarContainer.className = 'avatar-container';
        
        const hausaiAvatar = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        hausaiAvatar.setAttribute('viewBox', '0 0 100 100');
        hausaiAvatar.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        hausaiAvatar.setAttribute('width', '100%');
        hausaiAvatar.setAttribute('height', '100%');
        
        // Crear el SVG exacto como en la imagen
        // Fondo negro
        const circleBg = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circleBg.setAttribute('cx', '50');
        circleBg.setAttribute('cy', '50');
        circleBg.setAttribute('r', '50');
        circleBg.setAttribute('fill', 'black');
        hausaiAvatar.appendChild(circleBg);
        
        // Círculo blanco exterior
        const circleWhite = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circleWhite.setAttribute('cx', '50');
        circleWhite.setAttribute('cy', '50');
        circleWhite.setAttribute('r', '48');
        circleWhite.setAttribute('fill', 'white');
        circleWhite.setAttribute('stroke', 'black');
        circleWhite.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(circleWhite);
        
        // Parte inferior negra
        const rectBottom = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rectBottom.setAttribute('x', '2');
        rectBottom.setAttribute('y', '60');
        rectBottom.setAttribute('width', '96');
        rectBottom.setAttribute('height', '38');
        rectBottom.setAttribute('fill', 'black');
        hausaiAvatar.appendChild(rectBottom);
        
        // Líneas diagonales izquierda
        for (let i = 0; i < 3; i++) {
          const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
          line.setAttribute('x1', '10 + ' + (i * 2));
          line.setAttribute('y1', '20 + ' + (i * 2));
          line.setAttribute('x2', '25 + ' + (i * 2));
          line.setAttribute('y2', '35 + ' + (i * 2));
          line.setAttribute('stroke', 'black');
          line.setAttribute('stroke-width', '2');
          hausaiAvatar.appendChild(line);
        }
        
        // Línea vertical central
        const lineVertical = document.createElementNS("http://www.w3.org/2000/svg", "line");
        lineVertical.setAttribute('x1', '50');
        lineVertical.setAttribute('y1', '10');
        lineVertical.setAttribute('x2', '50');
        lineVertical.setAttribute('y2', '60');
        lineVertical.setAttribute('stroke', 'black');
        lineVertical.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(lineVertical);
        
        // Círculo negro en la parte superior derecha
        const circleTopRight = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circleTopRight.setAttribute('cx', '70');
        circleTopRight.setAttribute('cy', '20');
        circleTopRight.setAttribute('r', '5');
        circleTopRight.setAttribute('fill', 'black');
        hausaiAvatar.appendChild(circleTopRight);
        
        // Círculo negro en la parte media izquierda
        const circleMiddleLeft = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circleMiddleLeft.setAttribute('cx', '30');
        circleMiddleLeft.setAttribute('cy', '35');
        circleMiddleLeft.setAttribute('r', '5');
        circleMiddleLeft.setAttribute('fill', 'black');
        hausaiAvatar.appendChild(circleMiddleLeft);
        
        // Semicírculo azul en la parte inferior izquierda
        const pathBlue = document.createElementNS("http://www.w3.org/2000/svg", "path");
        pathBlue.setAttribute('d', 'M20,60 A30,30 0 0,1 50,60 L50,90 L20,90 Z');
        pathBlue.setAttribute('fill', '#0057b8');
        hausaiAvatar.appendChild(pathBlue);
        
        // Semicírculo rojo en el centro
        const pathRed = document.createElementNS("http://www.w3.org/2000/svg", "path");
        pathRed.setAttribute('d', 'M50,60 A30,30 0 0,1 80,60 L80,90 L50,90 Z');
        pathRed.setAttribute('fill', '#d90000');
        hausaiAvatar.appendChild(pathRed);
        
        // Semicírculo amarillo en la parte derecha
        const pathYellow = document.createElementNS("http://www.w3.org/2000/svg", "path");
        pathYellow.setAttribute('d', 'M80,10 A30,30 0 0,1 80,60 L80,90 L100,90 L100,10 Z');
        pathYellow.setAttribute('fill', '#ffd700');
        hausaiAvatar.appendChild(pathYellow);
        
        // Círculo rojo dentro del azul
        const circleRedInsideBlue = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circleRedInsideBlue.setAttribute('cx', '35');
        circleRedInsideBlue.setAttribute('cy', '75');
        circleRedInsideBlue.setAttribute('r', '10');
        circleRedInsideBlue.setAttribute('fill', '#d90000');
        hausaiAvatar.appendChild(circleRedInsideBlue);
        
        // Líneas horizontales en el semicírculo rojo
        for (let i = 0; i < 3; i++) {
          const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
          line.setAttribute('x1', '55');
          line.setAttribute('y1', '40 + ' + (i * 5));
          line.setAttribute('x2', '75');
          line.setAttribute('y2', '40 + ' + (i * 5));
          line.setAttribute('stroke', 'black');
          line.setAttribute('stroke-width', '2');
          hausaiAvatar.appendChild(line);
        }
        
        // Líneas horizontales en el semicírculo amarillo
        for (let i = 0; i < 3; i++) {
          const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
          line.setAttribute('x1', '85');
          line.setAttribute('y1', '25 + ' + (i * 5));
          line.setAttribute('x2', '95');
          line.setAttribute('y2', '25 + ' + (i * 5));
          line.setAttribute('stroke', 'black');
          line.setAttribute('stroke-width', '2');
          hausaiAvatar.appendChild(line);
        }
        
        // Arco en la parte inferior derecha
        const pathArc = document.createElementNS("http://www.w3.org/2000/svg", "path");
        pathArc.setAttribute('d', 'M80,80 Q90,75 100,80');
        pathArc.setAttribute('fill', 'none');
        pathArc.setAttribute('stroke', 'black');
        pathArc.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(pathArc);
        
        avatarContainer.appendChild(hausaiAvatar);
        messageDiv.appendChild(avatarContainer);
      }
      
      const contentDiv = document.createElement('div');
      contentDiv.className = 'message-content';
      contentDiv.textContent = text;
      messageDiv.appendChild(contentDiv);
      
      messagesDiv.appendChild(messageDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    function addHTMLMessage(html) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message bauai';
      
      // Añadir avatar de HausAI (exactamente como en la imagen)
      const avatarContainer = document.createElement('div');
      avatarContainer.className = 'avatar-container';
      
      const hausaiAvatar = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      hausaiAvatar.setAttribute('viewBox', '0 0 100 100');
      hausaiAvatar.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
      hausaiAvatar.setAttribute('width', '100%');
      hausaiAvatar.setAttribute('height', '100%');
      
      // Crear el SVG exacto como en la imagen
      // Fondo negro
      const circleBg = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circleBg.setAttribute('cx', '50');
      circleBg.setAttribute('cy', '50');
      circleBg.setAttribute('r', '50');
      circleBg.setAttribute('fill', 'black');
      hausaiAvatar.appendChild(circleBg);
      
      // Círculo blanco exterior
      const circleWhite = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circleWhite.setAttribute('cx', '50');
      circleWhite.setAttribute('cy', '50');
      circleWhite.setAttribute('r', '48');
      circleWhite.setAttribute('fill', 'white');
      circleWhite.setAttribute('stroke', 'black');
      circleWhite.setAttribute('stroke-width', '2');
      hausaiAvatar.appendChild(circleWhite);
      
      // Parte inferior negra
      const rectBottom = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      rectBottom.setAttribute('x', '2');
      rectBottom.setAttribute('y', '60');
      rectBottom.setAttribute('width', '96');
      rectBottom.setAttribute('height', '38');
      rectBottom.setAttribute('fill', 'black');
      hausaiAvatar.appendChild(rectBottom);
      
      // Líneas diagonales izquierda
      for (let i = 0; i < 3; i++) {
        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute('x1', '10 + ' + (i * 2));
        line.setAttribute('y1', '20 + ' + (i * 2));
        line.setAttribute('x2', '25 + ' + (i * 2));
        line.setAttribute('y2', '35 + ' + (i * 2));
        line.setAttribute('stroke', 'black');
        line.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(line);
      }
      
      // Línea vertical central
      const lineVertical = document.createElementNS("http://www.w3.org/2000/svg", "line");
      lineVertical.setAttribute('x1', '50');
      lineVertical.setAttribute('y1', '10');
      lineVertical.setAttribute('x2', '50');
      lineVertical.setAttribute('y2', '60');
      lineVertical.setAttribute('stroke', 'black');
      lineVertical.setAttribute('stroke-width', '2');
      hausaiAvatar.appendChild(lineVertical);
      
      // Círculo negro en la parte superior derecha
      const circleTopRight = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circleTopRight.setAttribute('cx', '70');
      circleTopRight.setAttribute('cy', '20');
      circleTopRight.setAttribute('r', '5');
      circleTopRight.setAttribute('fill', 'black');
      hausaiAvatar.appendChild(circleTopRight);
      
      // Círculo negro en la parte media izquierda
      const circleMiddleLeft = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circleMiddleLeft.setAttribute('cx', '30');
      circleMiddleLeft.setAttribute('cy', '35');
      circleMiddleLeft.setAttribute('r', '5');
      circleMiddleLeft.setAttribute('fill', 'black');
      hausaiAvatar.appendChild(circleMiddleLeft);
      
      // Semicírculo azul en la parte inferior izquierda
      const pathBlue = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pathBlue.setAttribute('d', 'M20,60 A30,30 0 0,1 50,60 L50,90 L20,90 Z');
      pathBlue.setAttribute('fill', '#0057b8');
      hausaiAvatar.appendChild(pathBlue);
      
      // Semicírculo rojo en el centro
      const pathRed = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pathRed.setAttribute('d', 'M50,60 A30,30 0 0,1 80,60 L80,90 L50,90 Z');
      pathRed.setAttribute('fill', '#d90000');
      hausaiAvatar.appendChild(pathRed);
      
      // Semicírculo amarillo en la parte derecha
      const pathYellow = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pathYellow.setAttribute('d', 'M80,10 A30,30 0 0,1 80,60 L80,90 L100,90 L100,10 Z');
      pathYellow.setAttribute('fill', '#ffd700');
      hausaiAvatar.appendChild(pathYellow);
      
      // Círculo rojo dentro del azul
      const circleRedInsideBlue = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circleRedInsideBlue.setAttribute('cx', '35');
      circleRedInsideBlue.setAttribute('cy', '75');
      circleRedInsideBlue.setAttribute('r', '10');
      circleRedInsideBlue.setAttribute('fill', '#d90000');
      hausaiAvatar.appendChild(circleRedInsideBlue);
      
      // Líneas horizontales en el semicírculo rojo
      for (let i = 0; i < 3; i++) {
        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute('x1', '55');
        line.setAttribute('y1', '40 + ' + (i * 5));
        line.setAttribute('x2', '75');
        line.setAttribute('y2', '40 + ' + (i * 5));
        line.setAttribute('stroke', 'black');
        line.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(line);
      }
      
      // Líneas horizontales en el semicírculo amarillo
      for (let i = 0; i < 3; i++) {
        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute('x1', '85');
        line.setAttribute('y1', '25 + ' + (i * 5));
        line.setAttribute('x2', '95');
        line.setAttribute('y2', '25 + ' + (i * 5));
        line.setAttribute('stroke', 'black');
        line.setAttribute('stroke-width', '2');
        hausaiAvatar.appendChild(line);
      }
      
      // Arco en la parte inferior derecha
      const pathArc = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pathArc.setAttribute('d', 'M80,80 Q90,75 100,80');
      pathArc.setAttribute('fill', 'none');
      pathArc.setAttribute('stroke', 'black');
      pathArc.setAttribute('stroke-width', '2');
      hausaiAvatar.appendChild(pathArc);
      
      avatarContainer.appendChild(hausaiAvatar);
      messageDiv.appendChild(avatarContainer);
      
      const contentDiv = document.createElement('div');
      contentDiv.className = 'message-content';
      contentDiv.innerHTML = html;
      messageDiv.appendChild(contentDiv);
      
      messagesDiv.appendChild(messageDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    // Inicializar con mensaje de bienvenida
    window.addEventListener('load', () => {
      addMessage("¿Qué quieres construir hoy?");
    });

    function normalizeInput(input) {
      return input.toLowerCase().trim()
        .replace(/á/g, 'a')
        .replace(/é/g, 'e')
        .replace(/í/g, 'i')
        .replace(/ó/g, 'o')
        .replace(/ú/g, 'u')
        .replace(/ü/g, 'u');
    }

    function findBestMatch(input) {
      const normalized = normalizeInput(input);
      
      if (knowledgeBase[normalized]) {
        return normalized;
      }
      
      for (const key in knowledgeBase) {
        if (normalized.includes(key) || key.includes(normalized)) {
          return key;
        }
      }
      
      return null;
    }

    // Generar respuesta genérica para cualquier producto
    function generateGenericResponse(productName) {
      // Materiales generales
      const genericMaterials = [
        `Superficie estructural básica (material apropiado para la función)`,
        `Elementos de soporte o conexión (para mantener integridad estructural)`,
        `Componentes funcionales esenciales (sin elementos decorativos)`
      ];
      
      // Pasos generales
      const genericSteps = [
        {
          title: "Definir función principal",
          description: `Identificar el propósito fundamental de ${productName} para determinar los componentes esenciales.`
        },
        {
          title: "Seleccionar materiales",
          description: `Elegir materiales que cumplan con la función sin excederse en características no necesarias.`
        },
        {
          title: "Ensamblar componentes",
          description: `Conectar los elementos de manera que se logre la funcionalidad mínima requerida.`
        },
        {
          title: "Verificar funcionalidad",
          description: `Probar que ${productName} cumple con su propósito básico sin elementos innecesarios.`
        }
      ];
      
      // Nota general
      const genericNote = "Sin elementos estéticos, decorativos o de confort. Solo lo necesario para que funcione.";
      
      // Diagrama genérico
      const genericDiagram = `<svg viewBox="0 0 200 200" class="bauhaus-diagram" xmlns="http://www.w3.org/2000/svg">
        <!-- Representación genérica -->
        <rect x="50" y="80" width="100" height="20" fill="none" stroke="black" stroke-width="2"/>
        <circle cx="70" cy="120" r="15" fill="none" stroke="black" stroke-width="2"/>
        <circle cx="130" cy="120" r="15" fill="none" stroke="black" stroke-width="2"/>
        <line x1="100" y1="80" x2="100" y2="100" stroke="black" stroke-width="2"/>
      </svg>`;
      
      return {
        materials: genericMaterials,
        steps: genericSteps,
        note: genericNote,
        diagram: genericDiagram
      };
    }

    function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;
      
      // Mostrar mensaje del usuario
      addMessage(message, true);
      userInput.value = '';
      
      // Procesar respuesta
      setTimeout(() => {
        const matchedKey = findBestMatch(message);
        
        let productInfo;
        
        if (matchedKey) {
          // Si encontramos un producto predefinido
          productInfo = knowledgeBase[matchedKey];
        } else {
          // Si no encontramos coincidencia exacta, generamos una respuesta genérica
          productInfo = generateGenericResponse(message);
        }
        
        // Mostrar respuesta conversacional
        let response = `Construcción funcional de ${message}:\n\n`;
        
        response += "Materiales esenciales:\n";
        productInfo.materials.forEach(material => {
          response += `— ${material}\n`;
        });
        
        response += "\nPaso a paso:\n";
        productInfo.steps.forEach((step, index) => {
          response += `${index + 1}. ${step.title}: ${step.description}\n`;
        });
        
        response += `\nNota: ${productInfo.note}`;
        
        addMessage(response);
        
        // Mostrar diagrama funcional
        const diagramHTML = `
          <div class="diagram-container">
            <div class="diagram-title">Diagrama funcional: ${message}</div>
            ${productInfo.diagram}
            <p style="font-weight:300;font-size:0.9rem;margin-top:10px;">
              Geometría esencial para la función. Sin elementos decorativos.
            </p>
          </div>
        `;
        addHTMLMessage(diagramHTML);
        
        // Mostrar formato visual mejorado
        showVisualConstruction(message, productInfo);
      }, 500);
    }

    function showVisualConstruction(productName, productInfo) {
      let materialsHTML = '<ul class="materials-list">';
      productInfo.materials.forEach(material => {
        materialsHTML += `<li>${material}</li>`;
      });
      materialsHTML += '</ul>';
      
      let stepsHTML = '<div class="steps-container">';
      productInfo.steps.forEach((step, index) => {
        stepsHTML += `
          <div class="step">
            <div class="step-number">${index + 1}</div>
            <div class="step-content">
              <h4>${step.title}</h4>
              <p>${step.description}</p>
            </div>
          </div>
        `;
      });
      stepsHTML += '</div>';
      
      let noteHTML = '';
      if (productInfo.note) {
        noteHTML = `<div class="note">${productInfo.note}</div>`;
      }
      
      const visualDiv = document.createElement('div');
      visualDiv.className = 'construction-result';
      visualDiv.innerHTML = `
        <h4 style="font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:15px;">
          Construcción visual: ${productName}
        </h4>
        <h4 style="font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin:15px 0 10px;">
          Materiales esenciales:
        </h4>
        ${materialsHTML}
        <h4 style="font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin:20px 0 10px;">
          Pasos de construcción:
        </h4>
        ${stepsHTML}
        ${noteHTML}
      `;
      
      messagesDiv.appendChild(visualDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    // Event listeners
    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });

    // Focus en el input al cargar
    userInput.focus();
  </script>
</body>
</html>


